Define method GenerateReply with argument input
    If input is empty then
        Return None
    End if

    Set prompt to Call Prompt.Template with argument input

    Set llmOutput to Call SendPromptToLlm with argument prompt
    If llmOutput is None then
        Set genericErrorMessage to Call internal.GenerateGenericErrorMessage
        Return genericErrorMessage
    End if

    Set deserializedObject to Call internal.IsValidJson with argument llmOutput
    If deserializedObject is None then
        Return llmOutput
    End if
    
    Set response to Call internal.FunctionCallingService.CallFunction with argument deserializedObject
    Return response
End method
